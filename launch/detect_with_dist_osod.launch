<!-- detect_with_dist.launch -->
<launch>

  <arg name="tall" default="false"/>

  <arg name="weights_file" default="$(find mattbot_image_detection)/weights/osod.pt"/>
  <arg name="labels_file" default="$(find mattbot_image_detection)/scripts/labels.txt"/>

  <arg name="clip_model" default="$(find mattbot_image_detection)/scripts/checkpoints/mobileclip_s0.pt"/>
  <arg name="root_dir" default="$(find mattbot_image_detection)/src/mobileclip"/>

  <arg name="save_dir" default="$(find mattbot_image_detection)/images/"/>

  <!-- Launch the object detection script -->
  <node name="image_detector_node" pkg="mattbot_image_detection" type="detect_with_dist_osod.py" output="screen">
    <param name="tall" value="$(arg tall)" />
    <param name="weights_file" value="$(arg weights_file)" />
    <param name="labels_file" value="$(arg labels_file)" />
    <param name="clip_model" value="$(arg clip_model)" />
    <param name="root_dir" value="$(arg root_dir)" />
  </node>

  <!-- Launch the gemini bridge -->
  <node name="gemini_bridge" pkg="mattbot_image_detection" type="gemini_bridge.py" output="screen" />

  <!-- Launch the image saver
  <node name="image_saver" pkg="mattbot_image_detection" type="image_saver.py" output="screen">
    <param name="save_dir" value="$(arg save_dir)" />
  </node> -->

  <!-- Launch the image sender -->
  <node name="image_sender" pkg="mattbot_image_detection" type="dds_image_sender.py" output="screen">
  </node> 

</launch>